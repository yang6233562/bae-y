KISSY.add("json",function(a,b,c){return a.JSON={stringify:b,parse:c}},{requires:["./json/stringify","./json/parse"]}),KISSY.add("json/parse",function(a,b,c){function d(b,c,e){var g,h,i,f=b[c];if("object"==typeof f)if(a.isArray(f)){g=0,h=f.length;for(var j=[];h>g;)i=d(f,String(g),e),void 0!==i&&(j[j.length]=i);f=j}else{var k=a.keys(f);for(g=0,h=k.length;h>g;g++){var l=k[g];i=d(f,l,e),void 0===i?delete f[l]:f[l]=i}}return e.call(b,c,f)}return b.yy={unQuote:c.unQuote},function(a,c){var e=b.parse(String(a));return c?d({"":e},"",c):e}},{requires:["./parser","./quote"]}),KISSY.add("json/parser",function(){var a={},b=KISSY,c={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},d=function(a){var c=this;c.rules=[],b.mix(c,a),c.resetInput(c.input)};d.prototype={constructor:function(a){var c=this;c.rules=[],b.mix(c,a),c.resetInput(c.input)},resetInput:function(a){b.mix(this,{input:a,matched:"",stateStack:[d.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var a=this,c=a.stateStack[a.stateStack.length-1],e=[];return c=a.mapState(c),b.each(a.rules,function(a){var f=a.state||a[3];f?b.inArray(c,f)&&e.push(a):c==d.STATIC.INITIAL&&e.push(a)}),e},pushState:function(a){this.stateStack.push(a)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var a=this,b=d.STATIC.DEBUG_CONTEXT_LIMIT,c=a.matched,e=a.match,f=a.input;c=c.slice(0,c.length-e.length);var g=(c.length>b?"...":"")+c.slice(-b).replace(/\n/," "),h=e+f;return h=h.slice(0,b)+(h.length>b?"...":""),g+h+"\n"+new Array(g.length+1).join("-")+"^"},mapSymbol:function(a){var b=this,c=b.symbolMap;return c?c[a]||(c[a]=++b.symbolId):a},mapReverseSymbol:function(a){var d,b=this,c=b.symbolMap,e=b.reverseSymbolMap;if(!e&&c){e=b.reverseSymbolMap={};for(d in c)e[c[d]]=d}return e?e[a]:a},mapState:function(a){var b=this,c=b.stateMap;return c?c[a]||(c[a]=++b.stateId):a},lex:function(){var e,f,g,h,i,a=this,c=a.input,j=a.getCurrentRules();if(a.match=a.text="",!c)return a.mapSymbol(d.STATIC.END_TAG);for(e=0;e<j.length;e++){f=j[e];var k=f.regexp||f[1],l=f.token||f[0],m=f.action||f[2]||void 0;if(g=c.match(k)){i=g[0].match(/\n.*/g),i&&(a.lineNumber+=i.length),b.mix(a,{firstLine:a.lastLine,lastLine:a.lineNumber+1,firstColumn:a.lastColumn,lastColumn:i?i[i.length-1].length-1:a.lastColumn+g[0].length});var n;return n=a.match=g[0],a.matches=g,a.text=n,a.matched+=n,h=m&&m.call(a),h=void 0==h?l:a.mapSymbol(h),c=c.slice(n.length),a.input=c,h?h:a.lex()}}return void 0}},d.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var e=new d({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});return a.lexer=e,e.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20},a.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return"true"===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){return this.$1[this.$1.length]=this.$3,this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var a={};return a[this.$1.key]=this.$1.value,a}],[20,[20,3,19],function(){return this.$1[this.$3.key]=this.$3.value,this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]],a.table={gotos:{0:{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},action:{0:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,0],8:[2,14,0]}}},a.parse=function(a){var f,g,h,d=this,e=d.lexer,i=d.table,j=i.gotos,k=i.action,l=d.productions,m=[null],n=[0];for(e.resetInput(a);;){if(f=n[n.length-1],g||(g=e.lex()),!g)return!1;if(h=k[f]&&k[f][g],!h){var p,o=[];return k[f]&&b.each(k[f],function(a,b){o.push(d.lexer.mapReverseSymbol(b))}),p="Syntax error at line "+e.lineNumber+":\n"+e.showDebugInfo()+"\n"+"expect "+o.join(", "),!1}switch(h[c.TYPE_INDEX]){case c.SHIFT_TYPE:n.push(g),m.push(e.text),n.push(h[c.TO_INDEX]),g=null;break;case c.REDUCE_TYPE:var q=l[h[c.PRODUCTION_INDEX]],r=q.symbol||q[0],s=q.action||q[2],t=q.rhs||q[1],u=t.length,v=0,w=void 0,x=m[m.length-u];for(d.$$=x;u>v;v++)d["$"+(u-v)]=m[m.length-1-v];s&&(w=s.call(d)),x=void 0!==w?w:d.$$,u&&(n=n.slice(0,2*-1*u),m=m.slice(0,-1*u)),n.push(r),m.push(x);var y=j[n[n.length-2]][n[n.length-1]];n.push(y);break;case c.ACCEPT_TYPE:return x}}return void 0},a}),KISSY.add("json/quote",function(a){var b={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","    ":"\\t",'"':'\\"'},c={},d=/["\b\f\n\r\t\x00-\x1f]/g,e=/\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;return a.each(b,function(a,b){c[b]=a}),c["\\/"]="/",{quote:function(a){return'"'+a.replace(d,function(a){var c;return(c=b[a])||(c="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)),c})+'"'},unQuote:function(a){return a.slice(1,a.length-1).replace(e,function(a){var b;return(b=c[a])||(b=String.fromCharCode(parseInt(a.slice(2),16))),b})}}}),KISSY.add("json/stringify",function(a,b){function c(a){return 10>a?"0"+a:a}function d(d,g,h,i,j,k,l){var m=g[d];switch(m&&"object"==typeof m&&("function"==typeof m.toJSON?m=m.toJSON(d):m instanceof Date?m=isFinite(m.valueOf())?m.getUTCFullYear()+"-"+c(m.getUTCMonth()+1)+"-"+c(m.getUTCDate())+"T"+c(m.getUTCHours())+":"+c(m.getUTCMinutes())+":"+c(m.getUTCSeconds())+"Z":null:(m instanceof String||m instanceof Number||m instanceof Boolean)&&(m=m.valueOf())),void 0!==h&&(m=h.call(g,d,m)),typeof m){case"number":return isFinite(m)?String(m):"null";case"string":return b.quote(m);case"boolean":return String(m);case"object":return m?a.isArray(m)?f(m,h,i,j,k,l):e(m,h,i,j,k,l):"null"}return void 0}function e(c,e,f,g,h,i){if(a.inArray(c,h))throw new TypeError("cyclic json");h[h.length]=c;var j=i;i+=g;var k,l,m,n;k=void 0!==f?f:a.keys(c);var o=[];for(m=0,l=k.length;l>m;m++){n=k[m];var p=d(n,c,e,f,g,h,i);if(void 0!==p){var q=b.quote(n);q+=":",g&&(q+=" "),q+=p,o[o.length]=q}}var r;if(o.length)if(g){var s=",\n"+i,t=o.join(s);r="{\n"+i+t+"\n"+j+"}"}else r="{"+o.join(",")+"}";else r="{}";return h.pop(),r}function f(b,c,e,f,g,h){if(a.inArray(b,g))throw new TypeError("cyclic json");g[g.length]=b;var i=h;h+=f;for(var j=[],k=b.length,l=0;k>l;){var m=d(String(l),b,c,e,f,g,h);j[j.length]=void 0===m?"null":m,++l}var n;if(j.length)if(f){var o="\n,"+h,p=j.join(o);n="[\n"+h+p+"\n"+i+"]"}else n="["+j.join(",")+"]";else n="[]";return g.pop(),n}function g(b,c,e){var g,h,f="";return c&&("function"==typeof c?h=c:a.isArray(c)&&(g=c)),"number"==typeof e?(e=Math.min(10,e),f=new Array(e+1).join(" ")):"string"==typeof e&&(f=e.slice(0,10)),d("",{"":b},h,g,f,[],"")}return g},{requires:["./quote"]});