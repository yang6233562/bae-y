KISSY.add("base/attribute",function(a,b,c){function f(a,b){return"string"==typeof b?a[b]:b}function g(b,c){return b+a.ucfirst(c)+"Change"}function h(b,c,d,e,f,h,i,j){return i=i||d,b.fire(g(c,d),a.mix({attrName:i,subAttrName:h,prevVal:e,newVal:f},j))}function i(a,b,c){var d=a[b]||{};return c&&(a[b]=d),d}function j(a){return i(a,"__attrs",!0)}function k(a){return i(a,"__attrVals",!0)}function l(a,b){for(var d=0,e=b.length;a!=c&&e>d;d++)a=a[b[d]];return a}function m(a,b,d){var e=b.length-1,f=a;if(e>=0){for(var g=0;e>g;g++)a=a[b[g]];a!=c?a[b[g]]=d:f=c}return f}function n(a){var b;return-1!==a.indexOf(".")&&(b=a.split("."),a=b.shift()),{path:b,name:a}}function o(b,d,e){var f=e;return d&&(f=b===c?{}:a.clone(b),m(f,d,e)),f}function p(a,c){var d=g("before",c),e=b.getCustomEvent(a,d,1);e.defaultFn||(e.defaultFn=r)}function q(b,d,f,h,i){var j,k,m,q=n(d),s=d;if(d=q.name,j=q.path,m=b.get(d),p(b,d),j&&(k=l(m,j)),!j&&m===f)return c;if(j&&k===f)return c;f=o(m,j,f);var t=a.mix({attrName:d,subAttrName:s,prevVal:m,newVal:f,_opts:h,_attrs:i,target:b},h.data);if(h.silent){if(e===r.call(b,t))return e}else if(e===b.fire(g("before",d),t))return e;return b}function r(a){if(a.target===this){var b=this,d=a.newVal,f=a.prevVal,g=a.attrName,i=a.subAttrName,j=a._attrs,l=a._opts,m=b.setInternal(g,d);return m===e?m:(l.silent||(d=k(b)[g],h(b,"after",g,f,d,i,null,l.data),j?j.push({prevVal:f,newVal:d,attrName:g,subAttrName:i}):h(b,"","*",[f],[d],[i],[g],l.data)),c)}}function s(){}function t(a,b){var h,d=j(a),e=i(d,b),g=e.valueFn;return g&&(g=f(a,g))&&(h=g.call(a),h!==c&&(e.value=h),delete e.valueFn,d[b]=e),e.value}function u(a,b,d,e){var g,h,k;k=n(b),b=k.name,g=k.path,g&&(h=a.get(b),d=o(h,g,d));var m,l=i(j(a),b,!0),p=l.validator;return p&&(p=f(a,p))&&(m=p.call(a,d,b,e),m!==c&&m!==!0)?m:c}s.INVALID={};var d=s.INVALID,e=!1;return s.prototype={getAttrs:function(){return j(this)},getAttrVals:function(){var c,a=this,b={},d=j(a);for(c in d)b[c]=a.get(c);return b},addAttr:function(b,c,d){var g,e=this,f=j(e),h=a.clone(c);return(g=f[b])?a.mix(g,h,d):f[b]=h,e},addAttrs:function(b,c){var d=this;return a.each(b,function(a,b){d.addAttr(b,a)}),c&&d.set(c),d},hasAttr:function(a){return j(this).hasOwnProperty(a)},removeAttr:function(a){var b=this;return b.hasAttr(a)&&(delete j(b)[a],delete k(b)[a]),b},set:function(b,d,f){var g=this;if(a.isPlainObject(b)){f=d,f=f||{};var k,i=Object(b),j=[],l=[];for(b in i)(k=u(g,b,i[b],i))!==c&&l.push(k);if(l.length)return f.error&&f.error(l),e;for(b in i)q(g,b,i[b],f,j);var m=[],n=[],o=[],p=[];return a.each(j,function(a){n.push(a.prevVal),o.push(a.newVal),m.push(a.attrName),p.push(a.subAttrName)}),m.length&&h(g,"","*",n,o,p,m,f.data),g}return f=f||{},k=u(g,b,d),k!==c?(f.error&&f.error(k),e):q(g,b,d,f)},setInternal:function(a,b){var g=this,h=c,l=i(j(g),a,!0),m=l.setter;return m&&(m=f(g,m))&&(h=m.call(g,b,a)),h===d?e:(h!==c&&(b=h),k(g)[a]=b,c)},get:function(a){var e,h,m,n,b=this,d=".",g=k(b);return-1!==a.indexOf(d)&&(e=a.split(d),a=e.shift()),h=i(j(b),a),m=h.getter,n=a in g?g[a]:t(b,a),m&&(m=f(b,m))&&(n=m.call(b,n,a)),a in g||n===c||(g[a]=n),e&&(n=l(n,e)),n},reset:function(a,b){var c=this;if("string"==typeof a)return c.hasAttr(a)?c.set(a,t(c,a),b):c;b=a;var d=j(c),e={};for(a in d)e[a]=t(c,a);return c.set(e,b),c}},s},{requires:["event/custom"]}),KISSY.add("base",function(a,b,c){function d(a){var b=this,c=b.constructor;for(b.userConfig=a;c;)e(b,c.ATTRS),c=c.superclass?c.superclass.constructor:null;f(b,a)}function e(a,b){if(b)for(var c in b)a.addAttr(c,b[c],!1)}function f(a,b){if(b)for(var c in b)a.setInternal(c,b[c])}return a.augment(d,c.Target,b),d.Attribute=b,a.Base=d,d},{requires:["base/attribute","event/custom"]});